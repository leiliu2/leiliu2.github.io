<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å¡”ç½—æ—¶é—´ Â· Tarot Time</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      color-scheme: dark;
      --bg: #020617;
      --bg-elevated: #020617;
      --card: #020617;
      --accent: #eab308;
      --accent-soft: rgba(234, 179, 8, 0.15);
      --border-subtle: rgba(148, 163, 184, 0.3);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --shadow-soft: 0 22px 45px rgba(0, 0, 0, 0.65);
      --radius-xl: 20px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont,
        "SF Pro SC", "PingFang SC", "Microsoft YaHei", sans-serif;
      background:
        radial-gradient(circle at top, #1f2937 0, #020617 45%, #000000 100%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 32px 16px;
    }

    .app {
      max-width: 1100px;
      width: 100%;
      background: radial-gradient(circle at top left, #0f172a, #020617 55%);
      border-radius: 28px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: var(--shadow-soft);
      padding: 24px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 20px;
    }

    @media (max-width: 840px) {
      body {
        padding: 16px;
      }
      .app {
        grid-template-columns: 1fr;
        border-radius: 20px;
        padding: 16px;
      }
    }

    .app-header {
      grid-column: 1 / -1;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 8px;
    }

    .title-block h1 {
      font-size: 24px;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .title-block h1 span.cn {
      font-size: 18px;
      font-weight: 500;
      letter-spacing: 0.18em;
    }

    .title-block p {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .badge {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(16px);
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 12px rgba(234, 179, 8, 0.9);
    }

    .controls {
      grid-column: 1 / -1;
      margin: 4px 0 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    button {
      border: none;
      cursor: pointer;
      font: inherit;
    }

    .btn {
      padding: 9px 16px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.18s ease-out;
      backdrop-filter: blur(10px);
    }

    .btn-primary {
      background: radial-gradient(circle at top left, #facc15, #eab308);
      color: #111827;
      border: none;
      box-shadow:
        0 12px 30px rgba(0, 0, 0, 0.75),
        0 0 18px rgba(250, 204, 21, 0.4);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(15, 23, 42, 0.6);
    }

    .btn-primary:hover {
      filter: brightness(1.05);
      transform: translateY(-1px) translateZ(0);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .btn-icon {
      width: 18px;
      height: 18px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
    }

    .main-card {
      background: radial-gradient(circle at top, #020617, #020617 70%);
      border-radius: var(--radius-xl);
      border: 1px solid rgba(148, 163, 184, 0.5);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      padding: 16px;
      gap: 12px;
    }

    .card-image-wrapper {
      background: radial-gradient(circle at top, #020617, #000);
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      padding: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 280px;
    }

    .card-image-wrapper img {
      max-height: 320px;
      width: auto;
      border-radius: 12px;
      box-shadow: 0 18px 36px rgba(0, 0, 0, 0.85);
    }

    .card-placeholder {
      font-size: 14px;
      color: var(--text-muted);
      text-align: center;
      line-height: 1.7;
    }

    .tagline {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tagline-line {
      height: 1px;
      flex: 1;
      background: linear-gradient(
        to right,
        rgba(148, 163, 184, 0.1),
        rgba(148, 163, 184, 0.5),
        rgba(148, 163, 184, 0)
      );
    }

    .card-info {
      padding: 4px 2px 0;
    }

    .card-title {
      display: flex;
      align-items: baseline;
      gap: 10px;
      margin-bottom: 4px;
    }

    .card-title-main {
      font-size: 20px;
      font-weight: 600;
    }

    .card-title-sub {
      font-size: 13px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .card-meta {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .card-desc {
      font-size: 13px;
      line-height: 1.6;
      margin-bottom: 6px;
    }

    .card-meaning {
      font-size: 13px;
      line-height: 1.6;
      padding: 8px 10px;
      border-radius: 12px;
      background: linear-gradient(
        to right,
        rgba(234, 179, 8, 0.16),
        rgba(15, 23, 42, 0.9)
      );
      border: 1px solid rgba(234, 179, 8, 0.55);
    }

    .card-source {
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .side-panel {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .panel {
      background: radial-gradient(circle at top, #020617, #000);
      border-radius: var(--radius-xl);
      border: 1px solid rgba(148, 163, 184, 0.45);
      padding: 14px 14px 10px;
    }

    .panel h2 {
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      font-size: 11px;
      color: var(--text-muted);
    }

    .history-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 4px;
      font-size: 12px;
    }

    .history-table th,
    .history-table td {
      padding: 5px 4px;
      text-align: left;
      border-bottom: 1px solid rgba(31, 41, 55, 0.9);
    }

    .history-table th {
      font-size: 11px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .history-table tbody tr:last-child td {
      border-bottom: none;
    }

    .history-table tbody tr:nth-child(even) {
      background: rgba(15, 23, 42, 0.75);
    }

    .history-empty {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .spread {
      display: flex;
      gap: 10px;
      margin-top: 6px;
      overflow-x: auto;
      padding-bottom: 4px;
    }

    .spread-card {
      flex: 0 0 90px;
      text-align: center;
    }

    .spread-card img {
      width: 100%;
      border-radius: 10px;
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.85);
      margin-bottom: 4px;
    }

    .spread-card-title {
      font-size: 11px;
      line-height: 1.4;
      color: var(--text-muted);
    }

    .footer {
      grid-column: 1 / -1;
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      opacity: 0.9;
    }

    .footer a {
      color: var(--accent);
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="title-block">
        <h1>
          ğŸ”® TAROT TIME
          <span class="cn">å¡”ç½—æ—¶é—´</span>
        </h1>
        <p>å•äººè‡ªç”¨ Â· ä»…æŠ½å¤§é˜¿å°”å¡çº³ Â· ä½¿ç”¨æœ¬åœ°ç‰Œé¢å›¾åƒ</p>
      </div>
      <div class="badge">
        <span class="badge-dot"></span>
        MAJOR ARCANA Â· 22
      </div>
    </header>

    <div class="controls">
      <button class="btn btn-primary" id="btn-one">
        <span class="btn-icon">âœ¨</span>
        å¡”ç½—æ—¶é—´ï¼ˆæŠ½ä¸€å¼ ï¼‰
      </button>

      <button class="btn" id="btn-three">
        <span class="btn-icon">ğŸŒ—</span>
        æŠ½ä¸‰å¼ 
      </button>

      <button class="btn" id="btn-clear-history" title="ä»…æ¸…é™¤æœ¬åœ°æµè§ˆå™¨çš„è®°å½•ï¼Œä¸å½±å“ç‰Œé¢">
        <span class="btn-icon">ğŸ§¹</span>
        æ¸…ç©ºè®°å½•
      </button>
    </div>

    <!-- å·¦ä¾§ï¼šå½“å‰ç‰Œ -->
    <section class="main-card">
      <div class="tagline">
        <span class="tagline-line"></span>
        å½“å‰æŠ½ç‰Œ
        <span class="tagline-line"></span>
      </div>

      <div class="card-image-wrapper" id="card-image-wrapper">
        <div class="card-placeholder">
          ç‚¹å‡»ä¸Šæ–¹çš„ã€Œå¡”ç½—æ—¶é—´ã€æŒ‰é’®å¼€å§‹æŠ½ç‰Œã€‚<br />
          ä½¿ç”¨çš„æ˜¯ä½ æœ¬åœ°ä¸Šä¼ çš„ Riderâ€“Waite å¤§é˜¿å°”å¡çº³ç‰Œé¢å›¾ã€‚
        </div>
      </div>

      <div class="card-info" id="card-info">
        <!-- ç‰Œé¢ä¿¡æ¯å°†ç”±è„šæœ¬å¡«å…… -->
      </div>
    </section>

    <!-- å³ä¾§ï¼šä¸‰å¼ é˜µ & æŠ½ç‰Œå†å² -->
    <aside class="side-panel">
      <section class="panel">
        <h2>
          ä¸‰å¼ æŠ½ç‰Œé˜µ
          <span class="pill"><span>ğŸŒ™</span>æœ€è¿‘ä¸€æ¬¡</span>
        </h2>
        <div id="spread-container">
          <div class="history-empty">ç‚¹å‡»ã€ŒæŠ½ä¸‰å¼ ã€æŸ¥çœ‹ä¸‰å¼ ç‰Œçš„ç»„åˆã€‚</div>
        </div>
      </section>

      <section class="panel">
        <h2>
          æŠ½ç‰Œè®°å½•
          <span class="pill"><span>ğŸ’¾</span>ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨</span>
        </h2>
        <div id="history-container">
          <div class="history-empty">è¿˜æ²¡æœ‰è®°å½•ã€‚æ¯æ¬¡æŠ½ç‰Œåä¼šè‡ªåŠ¨åœ¨æ­¤æ·»åŠ æ—¥æœŸå’Œç‰Œåã€‚</div>
        </div>
      </section>
    </aside>

    <footer class="footer">
      <div>è§£è¯»åŸºäºä¼ ç»Ÿå¡”ç½—ä¸ A. E. Waiteã€ŠThe Pictorial Key to the Tarotã€‹ã€‚</div>
      <div>æç¤ºï¼šæœ¬é¡µé¢ä»…ä¾›ä¸ªäººå¨±ä¹ä¸è‡ªæˆ‘åæ€ï¼Œä¸å…·å¤‡ä»»ä½•é¢„æµ‹ä¿è¯ã€‚</div>
    </footer>
  </div>

  <script>
    // ä½ çš„ 22 å¼ å¤§é˜¿å°”å¡çº³é…ç½®
    const TAROT_CARDS = [
      {
        id: 0,
        number: "0",
        roman: "0",
        en: "The Fool",
        cn: "æ„šè€…",
        file: "RWS_Tarot_00_Fool.jpg",
        desc:
          "ä¸€ä¸ªå¹´è½»äººç«™åœ¨æ‚¬å´–è¾¹ï¼Œä»°æœ›å¤©ç©ºï¼Œè„šè¾¹çš„å°ç‹—ä¼´éšå·¦å³ï¼Œè±¡å¾å¤©çœŸä¸æ–°çš„æ—…ç¨‹ã€‚",
        meaning: "å‹‡æ•¢è¿ˆå‡ºæ–°çš„ä¸€æ­¥ï¼Œä¿æŒå¼€æ”¾ï¼Œä½†ä¹Ÿè¦ç•™æ„è„šä¸‹çš„è·¯ã€‚",
      },
      {
        id: 1,
        number: "I",
        roman: "I",
        en: "The Magician",
        cn: "é­”æœ¯å¸ˆ",
        file: "RWS_Tarot_01_Magician.jpg",
        desc:
          "é­”æœ¯å¸ˆä¸€æ‰‹æŒ‡å¤©ã€ä¸€æ‰‹æŒ‡åœ°ï¼Œæ¡Œä¸Šæ‘†æ”¾å››å…ƒç´ è±¡å¾ï¼Œä»£è¡¨æ„å¿—ä¸èµ„æºçš„ç»Ÿåˆã€‚",
        meaning: "ä½ å·²ç»æ‹¥æœ‰å®ç°ç›®æ ‡çš„æ¡ä»¶ï¼Œç°åœ¨éœ€è¦çš„æ˜¯ä¸“æ³¨ä¸è¡ŒåŠ¨ã€‚",
      },
      {
        id: 2,
        number: "II",
        en: "The High Priestess",
        cn: "å¥³ç¥­å¸",
        file: "RWS_Tarot_02_High_Priestess.jpg",
        desc:
          "å¥³ç¥­å¸ç«¯ååœ¨ä¸¤æ ¹é»‘ç™½æŸ±ä¹‹é—´ï¼Œæ€€æŠ±ç»ä¹¦ï¼Œè±¡å¾éšç§˜çŸ¥è¯†ä¸ç›´è§‰ã€‚",
        meaning: "å¤šå¬å¬å†…å¿ƒçš„å£°éŸ³ï¼Œç›¸ä¿¡ç›´è§‰ï¼Œä¸å¿…æ€¥äºè¡¨æ€æˆ–è¡ŒåŠ¨ã€‚",
      },
      {
        id: 3,
        number: "III",
        en: "The Empress",
        cn: "çš‡å",
        file: "RWS_Tarot_03_Empress.jpg",
        desc:
          "çš‡åååœ¨ç¹èŒ‚çš„è‡ªç„¶ç¯å¢ƒä¸­ï¼Œè±¡å¾ä¸°ç››ã€æ¯æ€§ä¸åˆ›é€ åŠ›ã€‚",
        meaning: "ç…§é¡¾å¥½è‡ªå·±ä¸ä»–äººï¼Œä»¥æ¸©æŸ”ä¸åŒ…å®¹å¸¦æ¥ä¸°ç››ä¸æˆé•¿ã€‚",
      },
      {
        id: 4,
        number: "IV",
        en: "The Emperor",
        cn: "çš‡å¸",
        file: "RWS_Tarot_04_Emperor.jpg",
        desc:
          "çš‡å¸ååœ¨çŸ³åˆ¶ç‹åº§ä¸Šï¼ŒèƒŒæ™¯æ˜¯åšç¡¬çš„å±±çŸ³ï¼Œä»£è¡¨ç§©åºã€æƒå¨ä¸ç»“æ„ã€‚",
        meaning: "ä»¥ç†æ€§ä¸è‡ªå¾‹å»ºç«‹è¾¹ç•Œå’Œç§©åºï¼ŒæŒæ¡å±€é¢ï¼Œè€Œéè¢«å±€é¢æ¨ç€èµ°ã€‚",
      },
      {
        id: 5,
        number: "V",
        en: "The Hierophant",
        cn: "æ•™çš‡",
        file: "RWS_Tarot_05_Hierophant.jpg",
        desc:
          "æ•™çš‡ååœ¨ç¥åœ£çš„åº§ä½ä¸Šï¼Œä¸¤åä¿¡å¾’è·ªåœ¨è„šä¸‹ï¼Œä»£è¡¨ä¼ ç»Ÿã€åˆ¶åº¦ä¸æ•™å¯¼ã€‚",
        meaning: "éµä»å†…å¿ƒè®¤å¯çš„ä»·å€¼è§‚ï¼Œå¯ä»¥å‘å¯ä¿¡èµ–çš„äººæˆ–ä½“ç³»å¯»æ±‚æŒ‡å¼•ã€‚",
      },
      {
        id: 6,
        number: "VI",
        en: "The Lovers",
        cn: "æ‹äºº",
        file: "RWS_Tarot_06_Lovers.jpg",
        desc:
          "ä¸€å¯¹ç”·å¥³ç«™åœ¨å¤©ä½¿æ³¨è§†ä¸‹ï¼Œè±¡å¾çˆ±ã€é€‰æ‹©ä¸ä»·å€¼è§‚çš„ç»Ÿä¸€ã€‚",
        meaning: "é¢å¯¹é‡è¦æŠ‰æ‹©æ—¶ï¼Œå¿ äºè‡ªå·±çš„å¿ƒï¼ŒåŒæ—¶æ‰¿æ‹…ç›¸åº”çš„è´£ä»»ã€‚",
      },
      {
        id: 7,
        number: "VII",
        en: "The Chariot",
        cn: "æˆ˜è½¦",
        file: "RWS_Tarot_07_Chariot.jpg",
        desc:
          "æˆ˜å£«ç«™åœ¨æˆ˜è½¦ä¸Šï¼Œç”±é»‘ç™½ä¸¤åªæ–¯èŠ¬å…‹æ–¯æ‹‰åŠ¨ï¼Œè±¡å¾å¯¹ç«‹åŠ›é‡è¢«æ„å¿—é©¾é©­ã€‚",
        meaning: "ä¿æŒæ–¹å‘æ„Ÿä¸ä¸“æ³¨ï¼Œä»¥æ„å¿—å’Œè‡ªå¾‹ç©¿è¿‡æ··ä¹±ä¸é˜»åŠ›ã€‚",
      },
      {
        id: 8,
        number: "VIII",
        en: "Strength",
        cn: "åŠ›é‡",
        file: "RWS_Tarot_08_Strength.jpg",
        desc:
          "å¥³å­è½»æŸ”åœ°åˆä¸Šç‹®å­çš„å˜´ï¼Œå¤´é¡¶æ— é™ç¬¦å·ï¼Œè±¡å¾æ¸©æŸ”è€Œåšå®šçš„å†…åœ¨åŠ›é‡ã€‚",
        meaning: "çœŸæ­£çš„åŠ›é‡æ¥è‡ªæ¸©å’Œä¸è€å¿ƒï¼Œè€Œä¸æ˜¯è›®åŠ›æˆ–æ§åˆ¶ã€‚",
      },
      {
        id: 9,
        number: "IX",
        en: "The Hermit",
        cn: "éšè€…",
        file: "RWS_Tarot_09_Hermit.jpg",
        desc:
          "éšè€…ç‹¬ç«‹ç«™åœ¨å±±å·…ï¼Œé«˜ä¸¾ç¯ç¬¼ï¼Œè±¡å¾å†…åœ¨æ™ºæ…§ä¸å­¤ç‹¬ä¸­çš„æ¢ç´¢ã€‚",
        meaning: "æš‚æ—¶æŠ½ç¦»å–§åš£ï¼Œå‘å†…å¯»æ‰¾ç­”æ¡ˆï¼Œç‹¬å¤„æ˜¯ä½ æ­¤åˆ»çš„åŠ æ²¹ç«™ã€‚",
      },
      {
        id: 10,
        number: "X",
        en: "Wheel of Fortune",
        cn: "å‘½è¿ä¹‹è½®",
        file: "RWS_Tarot_10_Wheel_of_Fortune.jpg",
        desc:
          "å·¨å¤§çš„è½®ç›˜ä¸Šåˆ»æœ‰ç¬¦å·ï¼Œå‘¨å›´æœ‰ç¥ç§˜ç”Ÿç‰©ï¼Œè±¡å¾å‘¨æœŸã€è½¬æœºä¸å‘½è¿çš„æµè½¬ã€‚",
        meaning: "å±€åŠ¿æ­£åœ¨å˜åŒ–ï¼Œé¡ºåŠ¿è€Œä¸ºï¼Œæ¯”æ­»å®ˆæ—§å±€æ›´æœ‰åˆ©ã€‚",
      },
      {
        id: 11,
        number: "XI",
        en: "Justice",
        cn: "æ­£ä¹‰",
        file: "RWS_Tarot_11_Justice.jpg",
        desc:
          "æ­£ä¹‰ååœ¨ç‹åº§ä¸Šï¼Œä¸€æ‰‹æŒå‰‘ï¼Œä¸€æ‰‹æŒå¤©å¹³ï¼Œè±¡å¾å…¬å¹³ä¸çœŸç›¸ã€‚",
        meaning: "æ˜¯æ—¶å€™é¢å¯¹å› æœä¸è´£ä»»ï¼Œä»¥å®¢è§‚ä¸ç†æ€§åšå‡ºå†³å®šã€‚",
      },
      {
        id: 12,
        number: "XII",
        en: "The Hanged Man",
        cn: "å€’åŠäºº",
        file: "RWS_Tarot_12_Hanged_Man (1).jpg",
        desc:
          "ç”·å­å€’æŒ‚åœ¨æ ‘ä¸Šå´é¢å¸¦å…‰ç¯ï¼Œè±¡å¾æš‚åœã€è§†è§’è½¬æ¢ä¸è‡ªæ„¿çš„ç‰ºç‰²ã€‚",
        meaning: "å…ˆæŒ‰ä¸‹æš‚åœé”®ï¼Œä»å¦ä¸€ä¸ªè§’åº¦çœ‹é—®é¢˜ï¼Œç­”æ¡ˆä¼šéšä¹‹æ”¹å˜ã€‚",
      },
      {
        id: 13,
        number: "XIII",
        en: "Death",
        cn: "æ­»ç¥",
        file: "RWS_Tarot_13_Death.jpg",
        desc:
          "éª‘ç€ç™½é©¬çš„éª·é«…æŒ¥èˆæ——å¸œï¼Œè±¡å¾ç»“æŸã€è½¬åŒ–ä¸ä¸å¯é€†çš„æ”¹å˜ã€‚",
        meaning: "æ—§çš„é˜¶æ®µæ­£åœ¨é€€åœºï¼Œç»™æ–°å¼€å§‹è…¾å‡ºç©ºé—´ï¼Œä¸å¿…ææƒ§ã€‚",
      },
      {
        id: 14,
        number: "XIV",
        en: "Temperance",
        cn: "èŠ‚åˆ¶",
        file: "RWS_Tarot_14_Temperance.jpg",
        desc:
          "å¤©ä½¿åœ¨ä¸¤æ¯ä¹‹é—´ç¼“ç¼“å€’æ°´ï¼Œä¸€è„šè¸æ°´ä¸€è„šè¸åœ°ï¼Œè±¡å¾å¹³è¡¡ä¸èåˆã€‚",
        meaning: "åœ¨å¯¹ç«‹ä¹‹é—´æ‰¾åˆ°ä¸­é“ï¼Œç”¨è€å¿ƒä¸è°ƒå’Œæ¥æ¨è¿›äº‹æƒ…ã€‚",
      },
      {
        id: 15,
        number: "XV",
        en: "The Devil",
        cn: "æ¶é­”",
        file: "RWS_Tarot_15_Devil.jpg",
        desc:
          "æ¶é­”ç«‹åœ¨å°ä¸Šï¼Œè„šä¸‹çš„ç”·å¥³è¢«é”é“¾æŸç¼šï¼Œè±¡å¾è¯±æƒ‘ã€ä¸Šç˜¾ä¸è™šå‡çš„é™åˆ¶ã€‚",
        meaning: "çœ‹æ¸…æ˜¯ä»€ä¹ˆåœ¨ç»‘ä½ä½ ï¼Œå…¶å®é”é“¾æ¯”ä½ æƒ³è±¡çš„æ›´æ¾ã€‚",
      },
      {
        id: 16,
        number: "XVI",
        en: "The Tower",
        cn: "é«˜å¡”",
        file: "RWS_Tarot_16_Tower.jpg",
        desc:
          "é—ªç”µå‡»ä¸­é«˜å¡”ï¼Œäººä»å¡”ä¸­è·Œè½ï¼Œè±¡å¾çªå¦‚å…¶æ¥çš„æ‰“ç ´ä¸è§‰é†’ã€‚",
        meaning: "ä¸ç¨³å›ºçš„ç»“æ„è¢«æ‹†è§£ï¼Œæ˜¯ç—›ä¹Ÿå¯èƒ½æ˜¯è§£è„±ï¼Œé‡å»ºä¼šæ›´çœŸå®ã€‚",
      },
      {
        id: 17,
        number: "XVII",
        en: "The Star",
        cn: "æ˜Ÿæ˜Ÿ",
        file: "RWS_Tarot_17_Star.jpg",
        desc:
          "å¥³å­åœ¨æ˜Ÿç©ºä¸‹å°†æ°´å€’å…¥æ¹–ä¸å¤§åœ°ï¼Œè±¡å¾å¸Œæœ›ã€ç–—æ„ˆä¸çµæ„Ÿã€‚",
        meaning: "ä¿æŒæ¸©æŸ”çš„ä¿¡å¿µï¼Œç›¸ä¿¡è‡ªå·±æ­£åœ¨æ…¢æ…¢èµ°å‘æ›´å¥½çš„åœ°æ–¹ã€‚",
      },
      {
        id: 18,
        number: "XVIII",
        en: "The Moon",
        cn: "æœˆäº®",
        file: "RWS_Tarot_18_Moon.jpg",
        desc:
          "æ»¡æœˆç…§è€€ä¸‹ï¼Œç‹—ä¸ç‹¼å¯¹æœˆé•¿åšï¼Œé¾™è™¾è‡ªæ°´ä¸­çˆ¬å‡ºï¼Œè±¡å¾æ½œæ„è¯†ä¸ä¸å®‰çš„å¹»è±¡ã€‚",
        meaning: "ä¸è¦è¢«ææƒ§å’ŒçŒœæµ‹ç‰µç€èµ°ï¼Œä¿¡ä»»ç›´è§‰ï¼ŒåŒæ—¶ä¿ç•™åˆ†è¾¨åŠ›ã€‚",
      },
      {
        id: 19,
        number: "XIX",
        en: "The Sun",
        cn: "å¤ªé˜³",
        file: "RWS_Tarot_19_Sun.jpg",
        desc:
          "èµ¤è£¸çš„å­©å­éª‘åœ¨ç™½é©¬ä¹‹ä¸Šï¼Œé˜³å…‰æ™®ç…§ï¼Œå‘æ—¥è‘µç››æ”¾ï¼Œè±¡å¾å–œæ‚¦ã€æˆåŠŸä¸ç”Ÿå‘½åŠ›ã€‚",
        meaning: "è¿™æ˜¯ä¸€æ®µé€‚åˆå±•éœ²è‡ªæˆ‘ä¸äº«å—æˆæœçš„æ—¶åˆ»ï¼Œå¦è¯šä¼šå¸¦æ¥å¥½è¿ã€‚",
      },
      {
        id: 20,
        number: "XX",
        en: "Judgement",
        cn: "å®¡åˆ¤",
        file: "RWS_Tarot_20_Judgement.jpg",
        desc:
          "å¤©ä½¿å¹å“å·è§’ï¼Œäººä»¬ä»æ£ºæœ¨ä¸­ç«™èµ·ï¼Œè±¡å¾è§‰é†’ã€å¬å”¤ä¸é‡ç”Ÿã€‚",
        meaning: "å¬å¬å‘½è¿åœ¨å¯¹ä½ è¯´ä»€ä¹ˆï¼Œæ˜¯æ—¶å€™å›åº”å†…å¿ƒçœŸæ­£çš„å¬å”¤äº†ã€‚",
      },
      {
        id: 21,
        number: "XXI",
        en: "The World",
        cn: "ä¸–ç•Œ",
        file: "RWS_Tarot_21_World.jpg",
        desc:
          "äººç‰©åœ¨èŠ±ç¯ä¸­èµ·èˆï¼Œå››è§’å„æœ‰è±¡å¾ç¬¦å·ï¼Œä»£è¡¨åœ†æ»¡ã€æ•´åˆä¸æ—…ç¨‹çš„å®Œæˆã€‚",
        meaning: "ä¸€ä¸ªé˜¶æ®µèµ°å‘åœ†æ»¡ï¼Œä½ å‡†å¤‡å¥½å¸¦ç€ç»éªŒå¼€å¯ä¸‹ä¸€åœˆæ—…ç¨‹ã€‚",
      },
    ];

    const imageBasePath = "images/"; // ä½ çš„å›¾ç‰‡ç›®å½•

    const oneBtn = document.getElementById("btn-one");
    const threeBtn = document.getElementById("btn-three");
    const clearBtn = document.getElementById("btn-clear-history");
    const imageWrapper = document.getElementById("card-image-wrapper");
    const cardInfo = document.getElementById("card-info");
    const spreadContainer = document.getElementById("spread-container");
    const historyContainer = document.getElementById("history-container");

    const HISTORY_KEY = "tarot-major-arcana-history";

    function formatDateTime(d = new Date()) {
      return d.toLocaleString("zh-CN", {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
        hour12: false,
      });
    }

    function saveHistory(history) {
      try {
        localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
      } catch (e) {
        console.warn("æ— æ³•ä¿å­˜åˆ° localStorageï¼š", e);
      }
    }

    function loadHistory() {
      try {
        const raw = localStorage.getItem(HISTORY_KEY);
        if (!raw) return [];
        const parsed = JSON.parse(raw);
        return Array.isArray(parsed) ? parsed : [];
      } catch (e) {
        console.warn("æ— æ³•ä» localStorage è¯»å–å†å²ï¼š", e);
        return [];
      }
    }

    function appendToHistory(cards) {
      const history = loadHistory();
      const now = formatDateTime();
      const newEntries = cards.map((card) => ({
        time: now,
        cn: card.cn,
        en: card.en,
      }));
      const updated = history.concat(newEntries);
      saveHistory(updated);
      renderHistory(updated);
    }

    function renderHistory(history) {
      if (!history || history.length === 0) {
        historyContainer.innerHTML =
          '<div class="history-empty">è¿˜æ²¡æœ‰è®°å½•ã€‚æ¯æ¬¡æŠ½ç‰Œåä¼šè‡ªåŠ¨åœ¨æ­¤æ·»åŠ æ—¥æœŸå’Œç‰Œåã€‚</div>';
        return;
      }

      const rows = history
        .slice()
        .reverse()
        .map(
          (entry) => `
        <tr>
          <td>${entry.time}</td>
          <td>${entry.cn} (${entry.en})</td>
        </tr>`
        )
        .join("");

      historyContainer.innerHTML = `
        <table class="history-table">
          <thead>
            <tr>
              <th style="width: 58%;">æ—¥æœŸ</th>
              <th>ç‰Œå</th>
            </tr>
          </thead>
          <tbody>${rows}</tbody>
        </table>
      `;
    }

    function renderSingleCard(card) {
      imageWrapper.innerHTML = `
        <img src="${imageBasePath + card.file}" alt="${card.en}" loading="lazy" />
      `;

      cardInfo.innerHTML = `
        <div class="card-title">
          <div class="card-title-main">${card.cn}</div>
          <div class="card-title-sub">${card.number} Â· ${card.en}</div>
        </div>
        <div class="card-meta">å¤§é˜¿å°”å¡çº³ Â· ç¼–å· ${card.id} Â· å•å¼ æŠ½ç‰Œ</div>
        <div class="card-desc">${card.desc}</div>
        <div class="card-meaning">ğŸ’¬ ${card.meaning}</div>
        <div class="card-source">å‚è€ƒï¼šA. E. Waiteï¼Œã€ŠThe Pictorial Key to the Tarotã€‹åŠä¼ ç»Ÿå¡”ç½—è§£è¯»ã€‚</div>
      `;
    }

    function renderSpread(cards) {
      if (!cards || cards.length === 0) {
        spreadContainer.innerHTML =
          '<div class="history-empty">ç‚¹å‡»ã€ŒæŠ½ä¸‰å¼ ã€æŸ¥çœ‹ä¸‰å¼ ç‰Œçš„ç»„åˆã€‚</div>';
        return;
      }

      const labels = ["è¿‡å»", "ç°åœ¨", "æœªæ¥"];

      const items = cards
        .map(
          (card, idx) => `
        <div class="spread-card">
          <img src="${imageBasePath + card.file}" alt="${card.en}" loading="lazy" />
          <div class="spread-card-title">
            <div>${labels[idx] ?? ""}</div>
            <div>${card.cn}</div>
          </div>
        </div>
      `
        )
        .join("");

      spreadContainer.innerHTML = `
        <div class="spread">
          ${items}
        </div>
      `;
    }

    function drawOne() {
      const card = TAROT_CARDS[Math.floor(Math.random() * TAROT_CARDS.length)];
      renderSingleCard(card);
      appendToHistory([card]);
    }

    function drawThree() {
      const shuffled = [...TAROT_CARDS].sort(() => Math.random() - 0.5);
      const cards = shuffled.slice(0, 3);
      // æ˜¾ç¤ºåœ¨å·¦ä¾§ä¸»åŒºåŸŸç¬¬ä¸€å¼ ï¼ˆå½“å‰ç„¦ç‚¹ï¼‰
      renderSingleCard(cards[1] || cards[0]);
      renderSpread(cards);
      appendToHistory(cards);
    }

    function clearHistory() {
      if (!confirm("ç¡®å®šè¦æ¸…ç©ºæœ¬åœ°æŠ½ç‰Œè®°å½•å—ï¼Ÿæ­¤æ“ä½œåªå½±å“æµè§ˆå™¨æœ¬åœ°æ•°æ®ã€‚")) return;
      saveHistory([]);
      renderHistory([]);
    }

    oneBtn.addEventListener("click", drawOne);
    threeBtn.addEventListener("click", drawThree);
    clearBtn.addEventListener("click", clearHistory);

    // åˆå§‹åŒ–å†å²
    renderHistory(loadHistory());
  </script>
</body>
</html>
